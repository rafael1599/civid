import{j as e,L,H as z,r as h,a as C}from"./app-f3ruYCrQ.js";import{A as M}from"./AuthenticatedLayout-BhUbQfUR.js";import"./ApplicationLogo-UXAArM2y.js";import"./transition-CICYfwhW.js";function S({asset:t}){const m=t.metadata?.image_url;return e.jsx(L,{href:route("entities.show",t.id),className:"block w-full max-w-sm mx-auto mb-8 group",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 dark:bg-gray-800 dark:border-gray-700",children:[e.jsxs("div",{className:"relative bg-white h-48 flex items-center justify-center p-6 border-b border-gray-50 dark:bg-gray-900 dark:border-gray-800",children:[m?e.jsx("img",{src:m,alt:t.name,className:"max-h-full max-w-full object-contain transform transition-transform duration-500 group-hover:scale-110"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-indigo-600 to-purple-600 opacity-90"}),e.jsxs("div",{className:"absolute top-4 left-4 z-10 flex flex-col gap-1",children:[e.jsx("span",{className:"bg-indigo-600 text-white px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider shadow-sm",children:t.category}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider shadow-sm border ${t.status==="ACTIVE"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-gray-50 text-gray-500 border-gray-100"}`,children:t.status})]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 group-hover:text-indigo-600 transition-colors",children:t.name}),e.jsx("div",{className:"space-y-3",children:t.metadata&&Object.entries(t.metadata).filter(([o])=>!["image_url","color"].includes(o)).slice(0,3).map(([o,n])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-400 capitalize font-medium",children:o.replace("_"," ")}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-semibold truncate max-w-[150px]",children:typeof n=="boolean"?n?"Yes":"No":String(n)})]},o))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-50 dark:border-gray-700 flex justify-center",children:e.jsxs("span",{className:"text-indigo-600 text-sm font-bold flex items-center gap-2 group-hover:translate-x-1 transition-transform",children:["Gestionar Activo",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})})]})})]})]})})}function E({auth:t,total_balance:m,history:o,assets:n,forecast:p}){const f=()=>{const[s,u]=h.useState(""),[b,x]=h.useState(!1),[l,g]=h.useState(null),[i,d]=h.useState(null),N=async a=>{if(a.preventDefault(),!!s.trim()){x(!0),g(null),d(null);try{const r=await window.axios.post(route("ingest"),{prompt:s});r.data.success&&g(r.data.draft)}catch(r){if(console.error("Ingestion failed",r),r.response?.status===419)d({type:"error",message:"Tu sesi√≥n ha expirado. Por favor, refresca la p√°gina."});else if(r.response?.status===422){const c=r.response.data;d({type:"info",message:c.message||"Por favor s√© m√°s espec√≠fico.",suggestions:c.suggestions||[]})}else{const c=r.response?.data?.message||"No pude procesar eso. Intenta de nuevo.";d({type:"error",message:c})}}finally{x(!1)}}},y=()=>{x(!0),!(!l||!l.actions||l.actions.length===0)&&C.post(route("ingest.execute"),{actions:l.actions},{preserveState:!0,onSuccess:()=>{g(null),u(""),d(null),x(!1)},onError:a=>{console.error("Execution failed",a),d({type:"error",message:"Error al guardar: "+Object.values(a).join(", ")}),x(!1)},onFinish:()=>x(!1)})};return e.jsxs("div",{className:"relative",children:[e.jsxs("form",{onSubmit:N,className:"relative z-20",children:[e.jsx("input",{type:"text",value:s,onChange:a=>u(a.target.value),placeholder:"Cu√©ntame o arrastra un recibo...",className:`w-full pl-5 pr-12 py-3 rounded-2xl border-none shadow-lg shadow-indigo-500/10 focus:ring-2 focus:ring-indigo-500 bg-white/80 backdrop-blur-xl text-sm font-medium text-gray-700 placeholder-gray-400 transition-all hover:bg-white ${i?.type==="error"?"ring-2 ring-rose-500/50":""}`,disabled:b,autoFocus:!0}),e.jsx("button",{type:"submit",disabled:b,className:"absolute right-2 top-2 p-1.5 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50",children:b?e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i&&!l&&e.jsx("div",{className:`mt-3 p-4 rounded-2xl text-sm font-medium animate-in fade-in slide-in-from-top-2 duration-300 border ${i.type==="error"?"bg-rose-50 text-rose-700 border-rose-100":"bg-amber-50 text-gray-800 border-amber-100"}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{className:"text-xl shrink-0",children:i.type==="error"?"üõë":"ü§î"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{children:i.message}),i.suggestions&&i.suggestions.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-xs uppercase tracking-widest font-black opacity-50 mb-1",children:"Prueba diciendo:"}),i.suggestions.map((a,r)=>e.jsxs("button",{onClick:()=>u(a),className:"block text-xs bg-white/50 hover:bg-white px-2 py-1 rounded-md transition-colors text-left w-full truncate",children:['"',a,'"']},r))]})]}),e.jsx("button",{onClick:()=>d(null),className:"opacity-50 hover:opacity-100 self-start",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),l&&e.jsxs("div",{className:"absolute top-full mt-4 left-0 right-0 bg-white rounded-2xl shadow-2xl border border-indigo-100 p-6 z-50 animate-in fade-in slide-in-from-top-4 duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"‚ú®"}),"Plan de Acci√≥n"]}),e.jsxs("p",{className:"text-indigo-600 font-bold text-xs mt-1",children:[l.actions?.length||0," acciones propuestas"]})]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-300 hover:text-gray-500",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.actions&&l.actions.length>0?e.jsxs("div",{className:"space-y-4",children:[l.actions.map((a,r)=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-100 text-sm",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsx("span",{className:"font-black text-indigo-600 uppercase text-[10px] tracking-widest",children:a.tool.replace("_"," ")})}),e.jsx("ul",{className:"space-y-1",children:Object.entries(a.params).map(([c,k])=>e.jsxs("li",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-500 capitalize",children:[c.replace("_"," "),":"]}),e.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:k})]},c))})]},r)),e.jsxs("button",{onClick:y,className:"w-full mt-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/20 active:scale-95 transition-all text-xs uppercase tracking-widest flex items-center justify-center gap-2",children:["Confirmar Acciones",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})]}):e.jsx("div",{className:"text-center text-rose-500 text-sm font-bold",children:"No se generaron acciones v√°lidas."})]})]})},j=({event:s})=>e.jsxs("div",{className:"relative pl-12 flex items-center justify-between group",children:[e.jsx("div",{className:`absolute left-0 w-8 h-8 rounded-xl flex items-center justify-center shadow-sm border border-gray-100 transition-all group-hover:scale-110 ${s.entity?.category==="ASSET"?"bg-indigo-50 text-indigo-600":"bg-amber-50 text-amber-600"}`,children:s.entity?.category==="ASSET"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),e.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05a2.5 2.5 0 014.9 0H18a1 1 0 001-1V8a1 1 0 00-1-1h-4z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),e.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-bold text-gray-900 text-sm leading-tight truncate",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tight truncate",children:s.entity?.name||"Sistema"}),e.jsx("span",{className:"text-[10px] text-gray-200",children:"‚Ä¢"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-tight",children:new Date(s.occurred_at).toLocaleDateString("es-ES",{month:"short",day:"numeric"})})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:`font-black text-sm tracking-tight ${parseFloat(s.amount)<0?"text-rose-600":"text-emerald-600"}`,children:[parseFloat(s.amount)>0?"+":"","$",Math.abs(s.amount).toLocaleString()]}),s.status==="PAID"&&e.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest leading-none",children:"Pagado"})]})]},s.id),w=s=>s<3?"text-rose-600 bg-rose-50 border-rose-100":s<7?"text-amber-600 bg-amber-50 border-amber-100":"text-gray-500 bg-gray-50 border-gray-100",v=s=>s===0?"Hoy":s===1?"Ma√±ana":s<0?`Vencido (${Math.abs(s)}d)`:`en ${s} d√≠as`;return e.jsxs(M,{user:t.user,header:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 px-4 md:px-0",children:[e.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-black leading-tight text-gray-900 tracking-tight",children:["Hola, ",t.user.name.split(" ")[0]]}),e.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mt-0.5",children:"Estado Vital y Financiero"})]}),e.jsxs("div",{className:"md:hidden relative ml-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border-2 border-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xs",children:t.user.name.charAt(0)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full"})]})]}),e.jsx("div",{className:"w-full md:max-w-md relative z-50",children:e.jsx(f,{})}),e.jsxs("div",{className:"hidden md:block relative",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border-2 border-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xs",children:t.user.name.charAt(0)}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full"})]})]}),children:[e.jsx(z,{title:"Dashboard"}),e.jsx("div",{className:"py-6 md:py-12 bg-gray-50/50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("div",{className:"mx-4 md:mx-0 bg-gradient-to-br from-indigo-600 to-indigo-900 p-8 rounded-[2.5rem] shadow-2xl text-white relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[e.jsx("p",{className:"text-[10px] font-black text-indigo-200 uppercase tracking-[0.3em] mb-2",children:"Net Worth Estimado"}),e.jsxs("h3",{className:"text-5xl md:text-6xl font-black tracking-tighter mb-1",children:["$",parseFloat(m).toLocaleString("es-ES",{minimumFractionDigits:0,maximumFractionDigits:0})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-white/10 rounded-full backdrop-blur-sm border border-white/10",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-[10px] font-bold",children:"+2.4% este mes"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -mr-16 -mt-16 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-indigo-400/10 rounded-full -ml-12 -mb-12 blur-2xl"})]}),e.jsxs("div",{className:"mx-4 md:mx-0 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-sm flex flex-col justify-center relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-ping"}),"Radar de Liquidez"]}),e.jsxs("h3",{className:"text-3xl font-black text-gray-900 tracking-tighter",children:["Necesitas ",e.jsxs("span",{className:"text-indigo-600",children:["$",Math.round(p.projected_amount).toLocaleString()]})]}),e.jsx("p",{className:"text-xs text-gray-400 font-bold mt-1",children:"Para cubrir los pr√≥ximos 30 d√≠as"})]}),e.jsx("div",{className:"absolute -right-8 -top-8 w-24 h-24 bg-indigo-50 rounded-full group-hover:scale-110 transition-transform duration-500"})]}),e.jsxs("div",{className:"md:col-span-2 bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-sm",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"}),"Pr√≥ximos Compromisos"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.upcoming_bills.slice(0,3).map(s=>e.jsxs("div",{className:"p-4 rounded-2xl border border-gray-50 bg-gray-50/30 flex flex-col justify-between hover:bg-white hover:shadow-lg hover:border-indigo-100 transition-all cursor-default group",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 text-xs leading-tight mb-1 truncate group-hover:text-indigo-600 transition-colors",children:s.entity_name}),e.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-widest border ${w(s.days_left)}`,children:v(s.days_left)})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-black text-gray-900 tracking-tight",children:["$",Math.round(Math.abs(s.amount)).toLocaleString()]}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-200 group-hover:text-indigo-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})]},s.id)),p.upcoming_bills.length===0&&e.jsxs("div",{className:"col-span-full py-6 text-center",children:[e.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-[0.2em] mb-1",children:"‚ú® Todo bajo control"}),e.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest",children:"No tienes pagos pendientes para los pr√≥ximos 30 d√≠as."})]})]})]})]}),e.jsxs("div",{className:"px-4 md:px-0",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Mis Activos"]}),e.jsx("button",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest border-b-2 border-indigo-100",children:"Ver Todos"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n&&n.length>0?n.map(s=>e.jsx(S,{asset:s},s.id)):e.jsx("div",{className:"col-span-full py-12 bg-white rounded-3xl border border-dashed border-gray-200 text-center text-gray-400 font-bold text-sm",children:"Sin activos registrados"})})]}),e.jsx("div",{className:"mx-4 md:mx-0",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm rounded-[2rem] border border-gray-100 p-8",children:[e.jsxs("h3",{className:"text-sm font-black text-gray-400 uppercase tracking-widest mb-8 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),"Lo que ha pasado"]}),o.length>0?e.jsx("div",{className:"space-y-8 relative before:absolute before:inset-0 before:left-4 before:w-0.5 before:bg-gray-50/50",children:o.map(s=>e.jsx(j,{event:s},s.id))}):e.jsx("div",{className:"text-center py-12 text-gray-400 font-bold text-sm bg-gray-50 rounded-2xl border border-dashed border-gray-100",children:"Sin historial reciente."})]})})]})})]})}export{E as default};
